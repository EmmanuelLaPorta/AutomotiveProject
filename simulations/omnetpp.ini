[General]
network = SimpleTDMANetwork
sim-time-limit = 0.1s  # 100ms hyperperiod
cmdenv-express-mode = true
cmdenv-autoflush = true

# Output
result-dir = results
output-vector-file = ${resultdir}/${configname}-${runnumber}.vec
output-scalar-file = ${resultdir}/${configname}-${runnumber}.sca

# Registrazione statistiche
**.scalar-recording = true
**.vector-recording = true
**.statistic-recording = true

# ============================================================
# SCHEDULER TDMA
# ============================================================
**.scheduler.hyperperiod = 0.1s
**.scheduler.datarate = 1Gbps
**.scheduler.ethernetOverhead = 38B  # 26 header + 12 IFG/CRC

# ============================================================
# SWITCH PARAMETERS
# ============================================================
**.switch*.datarate = 1Gbps
**.switch*.switchingDelay = 5us

# ✅ CRITICO: CONFIGURAZIONE MAC TABLE PER GLI SWITCH
# FORMATO: "MAC->porta, MAC->porta, ..."
# Switch1: LD1 locale (porta 0), CU via switch2 (porta 1)
**.switch1.macTableConfig = "00:00:00:00:00:03->0, 00:00:00:00:00:07->1"

# Switch2: LD2 locale (porta 0), CU locale (porta 1), LD1 via switch1 (porta 2)
**.switch2.macTableConfig = "00:00:00:00:00:04->0, 00:00:00:00:00:07->1, 00:00:00:00:00:03->2"

# Statistiche code switch
**.switch*.port*.txQueueLength.statistic-recording = true
**.switch*.port*.txQueueLength.vector-recording = true

# ============================================================
# FLOW 1: LD1 e LD2 → CU (LiDAR frontale critico ADAS)
# Periodo: 1.4ms, Payload: 1300B, Priorità: ALTA
# ============================================================

# LD1 Sender
**.LD1.numSenders = 1
**.LD1.numReceivers = 0
**.LD1.senderApp[0].name = "flow1_LD1_to_CU"
**.LD1.senderApp[0].period = 1.4ms
**.LD1.senderApp[0].payloadSize = 1300B
**.LD1.senderApp[0].burstSize = 1
**.LD1.senderApp[0].destAddr = "00:00:00:00:00:07"  # CU
**.LD1.senderApp[0].srcAddr = "00:00:00:00:00:03"   # LD1

# LD2 Sender
**.LD2.numSenders = 1
**.LD2.numReceivers = 0
**.LD2.senderApp[0].name = "flow1_LD2_to_CU"
**.LD2.senderApp[0].period = 1.4ms
**.LD2.senderApp[0].payloadSize = 1300B
**.LD2.senderApp[0].burstSize = 1
**.LD2.senderApp[0].destAddr = "00:00:00:00:00:07"  # CU
**.LD2.senderApp[0].srcAddr = "00:00:00:00:00:04"   # LD2

# CU Receiver
**.CU.numSenders = 0
**.CU.numReceivers = 1
**.CU.receiverApp[0].name = "flow1_LD1_to_CU"

# Statistiche metriche
**.CU.receiverApp[0].E2EDelay.statistic-recording = true
**.CU.receiverApp[0].E2EDelay.vector-recording = true
**.CU.receiverApp[0].jitter.statistic-recording = true
**.CU.receiverApp[0].jitter.vector-recording = true

# Statistiche code MAC
**.LD1.mac.txQueueLength.statistic-recording = true
**.LD1.mac.txQueueLength.vector-recording = true
**.LD2.mac.txQueueLength.statistic-recording = true
**.LD2.mac.txQueueLength.vector-recording = true
**.CU.mac.rxQueueLength.statistic-recording = true
**.CU.mac.rxQueueLength.vector-recording = true