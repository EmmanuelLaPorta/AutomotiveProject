[General]
network = AutomotiveTDMANetwork
sim-time-limit = 1s
cmdenv-express-mode = true
cmdenv-autoflush = true

# ===== REGISTRAZIONE GLOBALE STATISTICHE =====
**.scalar-recording = true
**.vector-recording = true
**.statistic-recording = true

# ===== METRICHE APPLICAZIONI RECEIVER =====
**.receiverApp[*].E2EDelay.statistic-recording = true
**.receiverApp[*].E2EBurstDelay.statistic-recording = true
**.receiverApp[*].jitter.statistic-recording = true


# ===== METRICHE CODE SWITCH =====
**.switch*.eth[*].txQueueLength.statistic-recording = true
**.switch*.eth[*].rxQueueLength.statistic-recording = true

# ===== METRICHE CODE END-SYSTEM =====
**.*.mac.txQueueLength.statistic-recording = true
**.*.mac.rxQueueLength.statistic-recording = true

# ===== FORMATO OUTPUT =====
result-dir = results
output-vector-file = ${resultdir}/${configname}-${runnumber}.vec
output-scalar-file = ${resultdir}/${configname}-${runnumber}.sca

# ============================================================================
# FLOW 1: LD1 → CU (LiDAR frontale, critico ADAS)
# ============================================================================
**.LD1.numSenders = 1
**.LD1.senderApp[0].name = "flow1_LD1_to_CU"
**.LD1.senderApp[0].payloadSize = 1300B
**.LD1.senderApp[0].burstSize = 1
**.LD1.senderApp[0].destAddr = "00:00:00:00:00:07"  # CU
**.LD1.senderApp[0].srcAddr = "00:00:00:00:00:03"   # LD1
**.CU.receiverApp[0].name = "flow1_LD1_to_CU"

# ============================================================================
# FLOW 1b: LD2 → CU (LiDAR frontale 2, critico ADAS)
# ============================================================================
**.LD2.numSenders = 1
**.LD2.senderApp[0].name = "flow1b_LD2_to_CU"
**.LD2.senderApp[0].payloadSize = 1300B
**.LD2.senderApp[0].burstSize = 1
**.LD2.senderApp[0].destAddr = "00:00:00:00:00:07"  # CU
**.LD2.senderApp[0].srcAddr = "00:00:00:00:00:0A"   # LD2
**.CU.receiverApp[1].name = "flow1b_LD2_to_CU"

# ============================================================================
# FLOW 2: ME → S1, S2, S3, S4 (Audio speaker, soft real-time) - MULTICAST
# ============================================================================
**.ME.numSenders = 2 # Un sender per audio (flow2), uno per video (flow6)
**.ME.senderApp[0].name = "flow2_Audio_Multicast"
**.ME.senderApp[0].payloadSize = 80B
**.ME.senderApp[0].burstSize = 1
**.ME.senderApp[0].destAddr = "01:00:5E:00:00:02"  # MCAST_AUDIO_FLOW2
**.ME.senderApp[0].srcAddr = "00:00:00:00:00:0B"   # ME

# I ricevitori ora ascoltano tutti lo stesso nome di flusso multicast
**.S1.receiverApp[0].name = "flow2_Audio_Multicast"
**.S2.receiverApp[0].name = "flow2_Audio_Multicast"
**.S3.receiverApp[0].name = "flow2_Audio_Multicast"
**.S4.receiverApp[0].name = "flow2_Audio_Multicast"

# ============================================================================
# FLOW 3: US1, US2, US3, US4 → CU (Sensori ultrasuoni parcheggio)
# ============================================================================
**.US1.senderApp[0].name = "flow3_US1_to_CU"
**.US1.senderApp[0].payloadSize = 188B
**.US1.senderApp[0].burstSize = 1
**.US1.senderApp[0].destAddr = "00:00:00:00:00:07"  # CU
**.US1.senderApp[0].srcAddr = "00:00:00:00:00:02"   # US1

**.US2.senderApp[0].name = "flow3_US2_to_CU"
**.US2.senderApp[0].payloadSize = 188B
**.US2.senderApp[0].burstSize = 1
**.US2.senderApp[0].destAddr = "00:00:00:00:00:07"  # CU
**.US2.senderApp[0].srcAddr = "00:00:00:00:00:09"   # US2

**.US3.senderApp[0].name = "flow3_US3_to_CU"
**.US3.senderApp[0].payloadSize = 188B
**.US3.senderApp[0].burstSize = 1
**.US3.senderApp[0].destAddr = "00:00:00:00:00:07"  # CU
**.US3.senderApp[0].srcAddr = "00:00:00:00:00:10"   # US3

**.US4.senderApp[0].name = "flow3_US4_to_CU"
**.US4.senderApp[0].payloadSize = 188B
**.US4.senderApp[0].burstSize = 1
**.US4.senderApp[0].destAddr = "00:00:00:00:00:07"  # CU
**.US4.senderApp[0].srcAddr = "00:00:00:00:00:0C"   # US4

# CU riceve da US1-4
**.CU.receiverApp[2].name = "flow3_US1_to_CU"
**.CU.receiverApp[3].name = "flow3_US2_to_CU"
**.CU.receiverApp[4].name = "flow3_US3_to_CU"
**.CU.receiverApp[5].name = "flow3_US4_to_CU"

# ============================================================================
# FLOW 4: CU → HU (Display dati controllo, cross-domain)
# ============================================================================
**.CU.senderApp[0].name = "flow4_CU_to_HU"
**.CU.senderApp[0].payloadSize = 1500B
**.CU.senderApp[0].burstSize = 7
**.CU.senderApp[0].destAddr = "00:00:00:00:00:06"  # HU
**.CU.senderApp[0].srcAddr = "00:00:00:00:00:07"   # CU
**.HU.receiverApp[0].name = "flow4_CU_to_HU"

# ============================================================================
# FLOW 5: CM1 → HU (Camera frontale, 60 FPS video RAW critico)
# ============================================================================
**.CM1.senderApp[0].name = "flow5_CM1_to_HU"
**.CM1.senderApp[0].payloadSize = 1500B
**.CM1.senderApp[0].burstSize = 119
**.CM1.senderApp[0].destAddr = "00:00:00:00:00:06"  # HU
**.CM1.senderApp[0].srcAddr = "00:00:00:00:00:04"   # CM1
**.HU.receiverApp[1].name = "flow5_CM1_to_HU"

# ============================================================================
# FLOW 6: ME → RS1, RS2 (Rear Seat Entertainment) - MULTICAST
# ============================================================================
**.ME.senderApp[1].name = "flow6_Video_Multicast"
**.ME.senderApp[1].payloadSize = 1500B
**.ME.senderApp[1].burstSize = 119
**.ME.senderApp[1].destAddr = "01:00:5E:00:00:06"  # MCAST_VIDEO_FLOW6
**.ME.senderApp[1].srcAddr = "00:00:00:00:00:0B"   # ME

**.RS1.receiverApp[0].name = "flow6_Video_Multicast"
**.RS2.receiverApp[0].name = "flow6_Video_Multicast"

# ============================================================================
# FLOW 7: TLM → HU, CU (Telematica GPS/LTE, cross-domain) - MULTICAST
# ============================================================================
**.TLM.numSenders = 1
**.TLM.senderApp[0].name = "flow7_Telematics_Multicast"
**.TLM.senderApp[0].payloadSize = 600B
**.TLM.senderApp[0].burstSize = 1
**.TLM.senderApp[0].destAddr = "01:00:5E:00:00:07"  # MCAST_TELE_FLOW7
**.TLM.senderApp[0].srcAddr = "00:00:00:00:00:01"   # TLM

# HU e CU ricevono lo stesso nome di flusso
**.HU.receiverApp[2].name = "flow7_Telematics_Multicast"
**.CU.receiverApp[6].name = "flow7_Telematics_Multicast"

# ============================================================================
# FLOW 8: RC → HU (Rear Camera retrocamera, 30 FPS critico parcheggio)
# ============================================================================
**.RC.senderApp[0].name = "flow8_RC_to_HU"
**.RC.senderApp[0].payloadSize = 1500B
**.RC.senderApp[0].burstSize = 119
**.RC.senderApp[0].destAddr = "00:00:00:00:00:06"  # HU
**.RC.senderApp[0].srcAddr = "00:00:00:00:00:0F"   # RC
**.HU.receiverApp[3].name = "flow8_RC_to_HU"

# ============================================================================
# CONFIGURAZIONE FINALE RECEIVERS (RIEPILOGO)
# ============================================================================
# Parametri non più necessari perché gestiti da NED
# **.CU.numReceivers = 7
# **.HU.numReceivers = 4
# **.S1.numReceivers = 1
# **.S2.numReceivers = 1
# **.S3.numReceivers = 1
# **.S4.numReceivers = 1
# **.RS1.numReceivers = 1
# **.RS2.numReceivers = 1
# Parametri non più necessari perché gestiti da NED
**.US1.numSenders = 1
**.US2.numSenders = 1
**.US3.numSenders = 1
**.US4.numSenders = 1
**.LD1.numSenders = 1
**.LD2.numSenders = 1
**.CM1.numSenders = 1
**.CU.numSenders = 1
**.RC.numSenders = 1

# Parametri rimossi perché non più usati
**.ME.senderApp[*].period = default(0s)
**.ME.senderApp[*].tdmaOffset = default(0s)
**.TLM.senderApp[*].period = default(0s)
**.TLM.senderApp[*].tdmaOffset = default(0s)
**.LD1.senderApp[*].period = default(0s)
**.LD1.senderApp[*].tdmaOffset = default(0s)
**.LD2.senderApp[*].period = default(0s)
**.LD2.senderApp[*].tdmaOffset = default(0s)
**.CU.senderApp[*].period = default(0s)
**.CU.senderApp[*].tdmaOffset = default(0s)
**.CM1.senderApp[*].period = default(0s)
**.CM1.senderApp[*].tdmaOffset = default(0s)
**.RC.senderApp[*].period = default(0s)
**.RC.senderApp[*].tdmaOffset = default(0s)
**.US1.senderApp[*].period = default(0s)
**.US1.senderApp[*].tdmaOffset = default(0s)
**.US2.senderApp[*].period = default(0s)
**.US2.senderApp[*].tdmaOffset = default(0s)
**.US3.senderApp[*].period = default(0s)
**.US3.senderApp[*].tdmaOffset = default(0s)
**.US4.senderApp[*].period = default(0s)
**.US4.senderApp[*].tdmaOffset = default(0s)
