[General]
network = AutomotiveTDMANetwork
sim-time-limit = 1s
cmdenv-express-mode = true
cmdenv-autoflush = true

# ===== REGISTRAZIONE GLOBALE STATISTICHE =====
**.scalar-recording = true
**.vector-recording = true
**.statistic-recording = true

# ===== METRICHE APPLICAZIONI RECEIVER =====
**.receiverApp[*].E2EDelay.statistic-recording = true
**.receiverApp[*].E2EBurstDelay.statistic-recording = true
**.receiverApp[*].jitter.statistic-recording = true


# ===== METRICHE CODE SWITCH =====
**.switch*.eth[*].txQueueLength.statistic-recording = true
**.switch*.eth[*].rxQueueLength.statistic-recording = true

# ===== METRICHE CODE END-SYSTEM =====
**.*.mac.txQueueLength.statistic-recording = true
**.*.mac.rxQueueLength.statistic-recording = true

# ===== FORMATO OUTPUT =====
result-dir = results
output-vector-file = ${resultdir}/${configname}-${runnumber}.vec
output-scalar-file = ${resultdir}/${configname}-${runnumber}.sca

# ============================================================================
# FLOW 1: LD1 → CU (LiDAR frontale, critico ADAS)
# Periodo: 1.4ms, Payload: 1300B
# ============================================================================
**.LD1.numSenders = 1
**.LD1.numReceivers = 0
**.LD1.senderApp[0].name = "flow1_LD1_to_CU"
**.LD1.senderApp[0].period = 0.0014s
**.LD1.senderApp[0].tdmaOffset = 0s
**.LD1.senderApp[0].payloadSize = 1300B
**.LD1.senderApp[0].burstSize = 1
**.LD1.senderApp[0].destAddr = "00:00:00:00:00:07"  # CU
**.LD1.senderApp[0].srcAddr = "00:00:00:00:00:03"   # LD1

# CU riceve da LD1
**.CU.receiverApp[0].name = "flow1_LD1_to_CU"

# ============================================================================
# FLOW 1b: LD2 → CU (LiDAR frontale 2, critico ADAS)
# Periodo: 1.4ms, Payload: 1300B
# ============================================================================
**.LD2.numSenders = 1
**.LD2.numReceivers = 0
**.LD2.senderApp[0].name = "flow1b_LD2_to_CU"
**.LD2.senderApp[0].period = 0.0014s
**.LD2.senderApp[0].tdmaOffset = 0s
**.LD2.senderApp[0].payloadSize = 1300B
**.LD2.senderApp[0].burstSize = 1
**.LD2.senderApp[0].destAddr = "00:00:00:00:00:07"  # CU
**.LD2.senderApp[0].srcAddr = "00:00:00:00:00:0A"   # LD2

# CU riceve da LD2
**.CU.receiverApp[1].name = "flow1b_LD2_to_CU"

# ============================================================================
# FLOW 2: ME → S1, S2, S3, S4 (Audio speaker, soft real-time)
# Periodo: 250us, Payload: 80B
# MULTICAST: 4 destinazioni
# ============================================================================
**.ME.numReceivers = 0

# ME → S1
**.ME.senderApp[0].name = "flow2_ME_to_S1"
**.ME.senderApp[0].period = 0.00025s
**.ME.senderApp[0].tdmaOffset = 0s
**.ME.senderApp[0].payloadSize = 80B
**.ME.senderApp[0].burstSize = 1
**.ME.senderApp[0].destAddr = "00:00:00:00:00:05"  # S1
**.ME.senderApp[0].srcAddr = "00:00:00:00:00:0B"   # ME

# ME → S2
**.ME.senderApp[1].name = "flow2_ME_to_S2"
**.ME.senderApp[1].period = 0.00025s
**.ME.senderApp[1].tdmaOffset = 0s
**.ME.senderApp[1].payloadSize = 80B
**.ME.senderApp[1].burstSize = 1
**.ME.senderApp[1].destAddr = "00:00:00:00:00:08"  # S2
**.ME.senderApp[1].srcAddr = "00:00:00:00:00:0B"   # ME

# ME → S3
**.ME.senderApp[2].name = "flow2_ME_to_S3"
**.ME.senderApp[2].period = 0.00025s
**.ME.senderApp[2].tdmaOffset = 0s
**.ME.senderApp[2].payloadSize = 80B
**.ME.senderApp[2].burstSize = 1
**.ME.senderApp[2].destAddr = "00:00:00:00:00:0D"  # S3
**.ME.senderApp[2].srcAddr = "00:00:00:00:00:0B"   # ME

# ME → S4
**.ME.senderApp[3].name = "flow2_ME_to_S4"
**.ME.senderApp[3].period = 0.00025s
**.ME.senderApp[3].tdmaOffset = 0s
**.ME.senderApp[3].payloadSize = 80B
**.ME.senderApp[3].burstSize = 1
**.ME.senderApp[3].destAddr = "00:00:00:00:00:11"  # S4
**.ME.senderApp[3].srcAddr = "00:00:00:00:00:0B"   # ME

# Speaker receivers
**.S1.numReceivers = 1
**.S1.receiverApp[0].name = "flow2_ME_to_S1"
**.S2.numReceivers = 1
**.S2.receiverApp[0].name = "flow2_ME_to_S2"
**.S3.numReceivers = 1
**.S3.receiverApp[0].name = "flow2_ME_to_S3"
**.S4.numReceivers = 1
**.S4.receiverApp[0].name = "flow2_ME_to_S4"

# ============================================================================
# FLOW 3: US1, US2, US3, US4 → CU (Sensori ultrasuoni parcheggio)
# Periodo: 100ms, Payload: 188B
# ============================================================================
**.US1.numSenders = 1
**.US1.senderApp[0].name = "flow3_US1_to_CU"
**.US1.senderApp[0].period = 0.1s
**.US1.senderApp[0].tdmaOffset = 0s
**.US1.senderApp[0].payloadSize = 188B
**.US1.senderApp[0].burstSize = 1
**.US1.senderApp[0].destAddr = "00:00:00:00:00:07"  # CU
**.US1.senderApp[0].srcAddr = "00:00:00:00:00:02"   # US1

**.US2.numSenders = 1
**.US2.senderApp[0].name = "flow3_US2_to_CU"
**.US2.senderApp[0].period = 0.1s
**.US2.senderApp[0].tdmaOffset = 0s
**.US2.senderApp[0].payloadSize = 188B
**.US2.senderApp[0].burstSize = 1
**.US2.senderApp[0].destAddr = "00:00:00:00:00:07"  # CU
**.US2.senderApp[0].srcAddr = "00:00:00:00:00:09"   # US2

**.US3.numSenders = 1
**.US3.senderApp[0].name = "flow3_US3_to_CU"
**.US3.senderApp[0].period = 0.1s
**.US3.senderApp[0].tdmaOffset = 0s
**.US3.senderApp[0].payloadSize = 188B
**.US3.senderApp[0].burstSize = 1
**.US3.senderApp[0].destAddr = "00:00:00:00:00:07"  # CU
**.US3.senderApp[0].srcAddr = "00:00:00:00:00:10"   # US3

**.US4.numSenders = 1
**.US4.senderApp[0].name = "flow3_US4_to_CU"
**.US4.senderApp[0].period = 0.1s
**.US4.senderApp[0].tdmaOffset = 0s
**.US4.senderApp[0].payloadSize = 188B
**.US4.senderApp[0].burstSize = 1
**.US4.senderApp[0].destAddr = "00:00:00:00:00:07"  # CU
**.US4.senderApp[0].srcAddr = "00:00:00:00:00:0C"   # US4

# CU riceve da US1-4
**.CU.receiverApp[2].name = "flow3_US1_to_CU"
**.CU.receiverApp[3].name = "flow3_US2_to_CU"
**.CU.receiverApp[4].name = "flow3_US3_to_CU"
**.CU.receiverApp[5].name = "flow3_US4_to_CU"

# ============================================================================
# FLOW 4: CU → HU (Display dati controllo, cross-domain)
# Periodo: 10ms, Payload: 10500B
# Frammentazione: 10500B / 1500B = 7 frammenti
# ============================================================================
**.CU.numSenders = 1
**.CU.senderApp[0].name = "flow4_CU_to_HU"
**.CU.senderApp[0].period = 0.01s
**.CU.senderApp[0].tdmaOffset = 0s
**.CU.senderApp[0].payloadSize = 1500B
**.CU.senderApp[0].burstSize = 7
**.CU.senderApp[0].destAddr = "00:00:00:00:00:06"  # HU
**.CU.senderApp[0].srcAddr = "00:00:00:00:00:07"   # CU

# HU riceve da CU
**.HU.receiverApp[0].name = "flow4_CU_to_HU"

# ============================================================================
# FLOW 5: CM1 → HU (Camera frontale, 60 FPS video RAW critico)
# Periodo: 16.66ms, Payload: 178500B
# Frammentazione: 178500B / 1500B = 119 frammenti
# ============================================================================
**.CM1.numSenders = 1
**.CM1.senderApp[0].name = "flow5_CM1_to_HU"
**.CM1.senderApp[0].period = 0.01666s
**.CM1.senderApp[0].tdmaOffset = 0s
**.CM1.senderApp[0].payloadSize = 1500B
**.CM1.senderApp[0].burstSize = 119
**.CM1.senderApp[0].destAddr = "00:00:00:00:00:06"  # HU
**.CM1.senderApp[0].srcAddr = "00:00:00:00:00:04"   # CM1

# HU riceve da CM1
**.HU.receiverApp[1].name = "flow5_CM1_to_HU"

# ============================================================================
# FLOW 6: ME → RS1, RS2 (Rear Seat Entertainment, streaming video 30 FPS)
# Periodo: 33.33ms, Payload: 178500B
# Frammentazione: 178500B / 1500B = 119 frammenti
# MULTICAST: 2 destinazioni
# ============================================================================
**.ME.numSenders = 6  # 4 audio + 2 video

# ME → RS1 (NUOVO)
**.ME.senderApp[4].name = "flow6_ME_to_RS1"
**.ME.senderApp[4].period = 0.03333s
**.ME.senderApp[4].tdmaOffset = 0s
**.ME.senderApp[4].payloadSize = 1500B
**.ME.senderApp[4].burstSize = 119
**.ME.senderApp[4].destAddr = "00:00:00:00:00:12"  # RS1
**.ME.senderApp[4].srcAddr = "00:00:00:00:00:0B"   # ME

# ME → RS2
**.ME.senderApp[5].name = "flow6_ME_to_RS2"
**.ME.senderApp[5].period = 0.03333s
**.ME.senderApp[5].tdmaOffset = 0s
**.ME.senderApp[5].payloadSize = 1500B
**.ME.senderApp[5].burstSize = 119
**.ME.senderApp[5].destAddr = "00:00:00:00:00:0E"  # RS2
**.ME.senderApp[5].srcAddr = "00:00:00:00:00:0B"   # ME

# RS1 e RS2 ricevono da ME
**.RS1.numReceivers = 1
**.RS1.receiverApp[0].name = "flow6_ME_to_RS1"
**.RS2.numReceivers = 1
**.RS2.receiverApp[0].name = "flow6_ME_to_RS2"

# ============================================================================
# FLOW 7: TLM → HU, CU (Telematica GPS/LTE, cross-domain)
# Periodo: 625us, Payload: 600B
# MULTICAST: 2 destinazioni
# ============================================================================
**.TLM.numSenders = 2

# TLM → HU
**.TLM.senderApp[0].name = "flow7_TLM_to_HU"
**.TLM.senderApp[0].period = 0.000625s
**.TLM.senderApp[0].tdmaOffset = 0s
**.TLM.senderApp[0].payloadSize = 600B
**.TLM.senderApp[0].burstSize = 1
**.TLM.senderApp[0].destAddr = "00:00:00:00:00:06"  # HU
**.TLM.senderApp[0].srcAddr = "00:00:00:00:00:01"   # TLM

# TLM → CU
**.TLM.senderApp[1].name = "flow7_TLM_to_CU"
**.TLM.senderApp[1].period = 0.000625s
**.TLM.senderApp[1].tdmaOffset = 0s
**.TLM.senderApp[1].payloadSize = 600B
**.TLM.senderApp[1].burstSize = 1
**.TLM.senderApp[1].destAddr = "00:00:00:00:00:07"  # CU
**.TLM.senderApp[1].srcAddr = "00:00:00:00:00:01"   # TLM

# HU e CU ricevono da TLM
**.HU.receiverApp[2].name = "flow7_TLM_to_HU"
**.CU.receiverApp[6].name = "flow7_TLM_to_CU"

# ============================================================================
# FLOW 8: RC → HU (Rear Camera retrocamera, 30 FPS critico parcheggio)
# Periodo: 33.33ms, Payload: 178000B
# Frammentazione: 178000B / 1500B = 119 frammenti (arrotondato)
# ============================================================================
**.RC.numSenders = 1
**.RC.senderApp[0].name = "flow8_RC_to_HU"
**.RC.senderApp[0].period = 0.03333s
**.RC.senderApp[0].tdmaOffset = 0s
**.RC.senderApp[0].payloadSize = 1500B
**.RC.senderApp[0].burstSize = 119
**.RC.senderApp[0].destAddr = "00:00:00:00:00:06"  # HU
**.RC.senderApp[0].srcAddr = "00:00:00:00:00:0F"   # RC

# HU riceve da RC
**.HU.receiverApp[3].name = "flow8_RC_to_HU"

# ============================================================================
# CONFIGURAZIONE FINALE RECEIVERS (RIEPILOGO)
# ============================================================================
# CU: 7 receivers (LD1, LD2, US1-4, TLM)
**.CU.numReceivers = 7

# HU: 4 receivers (CU, CM1, TLM, RC)
**.HU.numReceivers = 4